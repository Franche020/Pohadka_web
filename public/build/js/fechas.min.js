const checkIn=document.querySelector("#checkin"),checkOut=document.querySelector("#checkout"),room=document.querySelectorAll(".room"),formFecha=document.querySelector("#form-fecha");var roomnumber,checkInValue,checkOutValue,lang;function eventListeners(){checkIn.addEventListener("change",(function(e){checkInValue=e.target.value,comprobarEstado()})),checkOut.addEventListener("change",(function(e){checkOutValue=e.target.value,comprobarEstado()}))}function eventListenersRooms(){room.forEach(e=>{e.addEventListener("click",e=>{obtenerHabitacion(roomnumber=e.target.id.charAt(4)).then(e=>{mostrarRoom(e)}).catch(()=>{console.log("ERROR EN API")})})})}async function comprobarEstado(){if(void 0!==checkInValue&&void 0!==checkOutValue&&checkInValue<=checkOutValue){let e=[];const t=new FormData;t.append("checkIn",checkInValue),t.append("checkOut",checkOutValue);try{const n="http://localhost:3000/api/rooms",o=await fetch(n,{method:"POST",body:t}),a=await o.json();null!==a.resultado?(a.resultado.forEach(t=>{e.push(t.castillo)}),actualizarRooms(e)):(e=[],actualizarRooms(e))}catch(e){console.log(e)}}}function actualizarRooms(e){const t=document.querySelector("#room1"),n=document.querySelector("#room2"),o=document.querySelector("#room3"),a=document.querySelector("#room4");e.includes("1")?(t.classList.add("reserved"),t.classList.remove("avaiable")):(t.classList.add("avaiable"),t.classList.remove("reserved")),e.includes("2")?(n.classList.add("reserved"),n.classList.remove("avaiable")):(n.classList.add("avaiable"),n.classList.remove("reserved")),e.includes("3")?(o.classList.add("reserved"),o.classList.remove("avaiable")):(o.classList.add("avaiable"),o.classList.remove("reserved")),e.includes("4")?(a.classList.add("reserved"),a.classList.remove("avaiable")):(a.classList.add("avaiable"),a.classList.remove("reserved")),eventListenersRooms()}function mostrarRoom(e){carpetaImg="../imagenes/rooms/";const t=document.querySelector("body"),n=document.createElement("DIV");n.classList.add("overlay"),t.classList.add("no-scroll"),t.appendChild(n);const o=document.createElement("DIV");o.classList.add("card","center"),n.appendChild(o);const a=document.createElement("DIV");a.classList.add("cerrar"),o.appendChild(a),a.onclick=()=>{n.remove(),t.classList.remove("no-scroll")},a.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n    <line x1="18" y1="6" x2="6" y2="18" />\n    <line x1="6" y1="6" x2="18" y2="18" />\n    </svg>';const c=document.createElement("H3"),s=document.createElement("DIV"),i=document.createElement("P");i.classList.add("pax");const r=document.createElement("P");r.classList.add("price"),c.innerText=e.nombre,"cs"===lang.toLowerCase?s.innerHTML=e.descripcionCheco:s.innerHTML=e.descripcionIngles,i.innerHTML="<span>Pax: </span>"+e.capacidad,r.innerHTML=e.precio+" <span>Kc</span>",o.appendChild(c),o.appendChild(s),o.appendChild(i),o.appendChild(r);let l=e.fotosHabitacion[0]||0;const d=document.createElement("DIV");if(d.classList.add("div-imagen"),"object"==typeof l){let t=0;imagenHabitacion(d,e.fotosHabitacion,t),o.appendChild(d)}else{const e=document.createElement("H2");e.innerText="NO FOTO",e.classList.add("no-foto"),o.appendChild(e)}const u=document.createElement("BUTTON");u.textContent="Select Room",u.classList.add("boton","boton-submit"),o.appendChild(u),u.addEventListener("click",()=>{window.location.href=`/acommodation/confirm?roomNumber=${roomnumber}&checkIn=${checkInValue}&checkOut=${checkOutValue}`})}async function obtenerHabitacion(e){const t=new FormData;t.append("id",e);try{const e="http://localhost:3000/api/room",n=await fetch(e,{method:"POST",body:t});return(await n.json()).habitacion}catch(e){return console.log(e),resultado=[],resultado}}function lenguaje(){return navigator.language||navigator.userLanguage}function detectarDeslizamiento(e){return new Promise(t=>{let n=0,o=0;e.addEventListener("touchstart",e=>{n=e.touches[0].clientX},{passive:!0}),e.addEventListener("touchend",e=>{o=e.changedTouches[0].clientX;const a=o-n;t(a>0?"derecha":a<0?"izquierda":"sin deslizamiento")},{passive:!0})})}function imagenHabitacion(e,t,n){var o=n;const a=Object.keys(t).length-1,c=document.createElement("IMG");c.src=carpetaImg+t[o].url,"cs"===lang.toLowerCase?c.alt=t[o].altCheco:c.alt=t[o].altIngles,e.appendChild(c);const s=document.createElement("DIV"),i=document.createElement("DIV");s.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n      <path d="M5 12l14 0" />\n      <path d="M13 18l6 -6" />\n      <path d="M13 6l6 6" />\n      </svg>',i.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n      <path d="M5 12l14 0" />\n      <path d="M5 12l6 6" />\n      <path d="M5 12l6 -6" />\n      </svg>',s.classList.add("siguiente-foto"),i.classList.add("anterior-foto"),e.appendChild(s),e.appendChild(i),s.addEventListener("click",()=>{let n;console.log("siguiente"),n=fotoSiguiente(o,a),imagenHabitacion(e,t,n),c.remove()}),i.addEventListener("click",()=>{let n;console.log("siguiente"),n=fotoAnterior(o,a),imagenHabitacion(e,t,n),c.remove()}),detectarDeslizamiento(e).then(n=>{let s;if("izquierda"===n)s=fotoSiguiente(o,a);else{if("derecha"!==n)return;s=fotoAnterior(o,a)}imagenHabitacion(e,t,s),c.remove()}).catch()}function fotoSiguiente(e,t){let n=e;return e<t?n++:n=0,n}function fotoAnterior(e,t){let n=e;return 0===e?n=t:n--,n}document.addEventListener("DOMContentLoaded",(function(){eventListeners(),lang=lenguaje()}));
//# sourceMappingURL=fechas.js.map
