const checkIn=document.querySelector("#checkin"),checkOut=document.querySelector("#checkout"),room=document.querySelectorAll(".room"),formFecha=document.querySelector("#form-fecha"),acommodationSubmit=document.querySelector("#acommodation-submit"),map=document.querySelector("#mapa");var tipo,roomnumber,checkInValue,checkOutValue,acommodationType,lang;function eventListeners(){map.addEventListener("click",(function(){void 0===checkInValue&&void 0===checkOutValue&&Swal.fire({icon:"error",title:"Oops...",text:"Please select dates first!"})})),checkIn.addEventListener("change",(function(e){checkInValue=e.target.value,comprobarEstado()})),checkOut.addEventListener("change",(function(e){checkOutValue=e.target.value,comprobarEstado()})),acommodationSubmit.addEventListener("click",(function(e){e.preventDefault(),tipo=document.querySelector('input[name="tipo"]:checked'),void 0!==checkInValue&&void 0!==checkOutValue?null!==tipo?window.location.href=`/acommodation/confirm?checkIn=${checkInValue}&checkOut=${checkOutValue}&tipo=${tipo.value}`:Swal.fire({icon:"error",title:"Oops...",text:"Please select one acommodation option!"}):Swal.fire({icon:"error",title:"Oops...",text:"Please select dates!"})}))}function eventListenersRooms(){room.forEach(e=>{e.addEventListener("click",t=>{e.classList.contains("avaiable")&&((tipo=document.querySelector('input[name="tipo"][value="room"]')).checked=!0,obtenerHabitacion(roomnumber=t.target.id.charAt(4)).then(e=>{mostrarRoom(e)}).catch(()=>{console.log("ERROR EN API")}))})})}async function comprobarEstado(){if(void 0!==checkInValue&&void 0!==checkOutValue)if(void 0!==checkInValue&&void 0!==checkOutValue&&checkInValue<=checkOutValue){let e=[];const t=new FormData;t.append("checkIn",checkInValue),t.append("checkOut",checkOutValue);try{const o="http://localhost:3000/api/rooms",n=await fetch(o,{method:"POST",body:t}),a=await n.json();null!==a.resultado?(a.resultado.forEach(t=>{e.push(t.castillo)}),actualizarRooms(e)):(e=[],actualizarRooms(e))}catch(e){console.log(e)}}else Swal.fire({icon:"error",title:"Oops...",text:"The checkout date must be after the check-in date!"})}function actualizarRooms(e){const t=document.querySelector("#room1"),o=document.querySelector("#room2"),n=document.querySelector("#room3"),a=document.querySelector("#room4");e.includes("1")?(t.classList.add("reserved"),t.classList.remove("avaiable")):(t.classList.add("avaiable"),t.classList.remove("reserved")),e.includes("2")?(o.classList.add("reserved"),o.classList.remove("avaiable")):(o.classList.add("avaiable"),o.classList.remove("reserved")),e.includes("3")?(n.classList.add("reserved"),n.classList.remove("avaiable")):(n.classList.add("avaiable"),n.classList.remove("reserved")),e.includes("4")?(a.classList.add("reserved"),a.classList.remove("avaiable")):(a.classList.add("avaiable"),a.classList.remove("reserved")),eventListenersRooms()}function mostrarRoom(e){carpetaImg="../imagenes/rooms/";const t=document.querySelector("body"),o=document.createElement("DIV");o.classList.add("overlay"),t.classList.add("no-scroll"),t.appendChild(o);const n=document.createElement("DIV");n.classList.add("card","center"),o.appendChild(n);const a=document.createElement("DIV");a.classList.add("cerrar"),n.appendChild(a),a.onclick=()=>{o.remove(),t.classList.remove("no-scroll"),(tipo=document.querySelector('input[name="tipo"][value="room"]')).checked=!1},a.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n    <line x1="18" y1="6" x2="6" y2="18" />\n    <line x1="6" y1="6" x2="18" y2="18" />\n    </svg>';const c=document.createElement("H3"),i=document.createElement("DIV"),r=document.createElement("P");r.classList.add("pax");const s=document.createElement("P");s.classList.add("price"),c.innerText=e.nombre,"cs"===lang.toLowerCase?i.innerHTML=e.descripcionCheco:i.innerHTML=e.descripcionIngles,r.innerHTML="<span>Pax: </span>"+e.capacidad,s.innerHTML=e.precio+" <span>Kc</span>",n.appendChild(c),n.appendChild(i),n.appendChild(r),n.appendChild(s);let l=e.fotosHabitacion[0]||0;const d=document.createElement("DIV");if(d.classList.add("div-imagen"),"object"==typeof l){let t=0;imagenHabitacion(d,e.fotosHabitacion,t),n.appendChild(d)}else{const e=document.createElement("H2");e.innerText="NO FOTO",e.classList.add("no-foto"),n.appendChild(e)}const u=document.createElement("BUTTON");u.textContent="Select Room",u.classList.add("boton","boton-submit"),n.appendChild(u),u.addEventListener("click",e=>{window.location.href=`/acommodation/confirm?roomNumber=${roomnumber}&checkIn=${checkInValue}&checkOut=${checkOutValue}&tipo=room`})}async function obtenerHabitacion(e){const t=new FormData;t.append("id",e);try{const e="http://localhost:3000/api/room",o=await fetch(e,{method:"POST",body:t});return(await o.json()).habitacion}catch(e){return console.log(e),resultado=[],resultado}}function lenguaje(){return navigator.language||navigator.userLanguage}function detectarDeslizamiento(e){return new Promise(t=>{let o=0,n=0;e.addEventListener("touchstart",e=>{o=e.touches[0].clientX},{passive:!0}),e.addEventListener("touchend",e=>{n=e.changedTouches[0].clientX;const a=n-o;t(a>0?"derecha":a<0?"izquierda":"sin deslizamiento")},{passive:!0})})}function imagenHabitacion(e,t,o){var n=o;const a=Object.keys(t).length-1,c=document.createElement("IMG");c.src=carpetaImg+t[n].url,"cs"===lang.toLowerCase?c.alt=t[n].altCheco:c.alt=t[n].altIngles,e.appendChild(c);const i=document.createElement("DIV"),r=document.createElement("DIV");i.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n      <path d="M5 12l14 0" />\n      <path d="M13 18l6 -6" />\n      <path d="M13 6l6 6" />\n      </svg>',r.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="36" height="36" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">\n      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n      <path d="M5 12l14 0" />\n      <path d="M5 12l6 6" />\n      <path d="M5 12l6 -6" />\n      </svg>',i.classList.add("siguiente-foto"),r.classList.add("anterior-foto"),e.appendChild(i),e.appendChild(r),i.addEventListener("click",()=>{let o;o=fotoSiguiente(n,a),imagenHabitacion(e,t,o),c.remove()}),r.addEventListener("click",()=>{let o;o=fotoAnterior(n,a),imagenHabitacion(e,t,o),c.remove()}),detectarDeslizamiento(e).then(o=>{let i;if("izquierda"===o)i=fotoSiguiente(n,a);else{if("derecha"!==o)return;i=fotoAnterior(n,a)}imagenHabitacion(e,t,i),c.remove()}).catch()}function fotoSiguiente(e,t){let o=e;return e<t?o++:o=0,o}function fotoAnterior(e,t){let o=e;return 0===e?o=t:o--,o}function rellenarFechas(){""!==checkIn.value&&(checkInValue=checkIn.value),""!==checkOut.value&&(checkOutValue=checkOut.value),void 0===checkInValue&&(checkIn.value=""),void 0===checkOutValue&&(checkOut.value=""),void 0!==checkInValue&&void 0!==checkOutValue&&comprobarEstado()}document.addEventListener("DOMContentLoaded",(function(){eventListeners(),lang=lenguaje(),rellenarFechas()}));
//# sourceMappingURL=fechas.js.map
